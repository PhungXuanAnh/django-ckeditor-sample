<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>CKEditor 3.x/Developers Guide/Data Processor - CKSource Docs</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"CKEditor_3.x/Developers_Guide/Data_Processor","wgTitle":"CKEditor 3.x/Developers Guide/Data Processor","wgCurRevisionId":4436,"wgRevisionId":4436,"wgArticleId":1392,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"CKEditor_3.x/Developers_Guide/Data_Processor","wgRelevantArticleId":1392,"wgRequestId":"WzWpMT35r@OQ5VxhRJw8zAAAAQ0","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"preview":true,"publish":true}});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@11i7vzj",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.HighlightjsIntegration"]);});</script>
<link rel="stylesheet" href="../../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor&amp;only=styles&amp;skin=oldv4.css"/>
<script async="" src="../../load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=oldv4"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<meta name="generator" content="MediaWiki 1.29.1"/>
<link rel="shortcut icon" href="https://c.cksource.com/c/2/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://docs-old.ckeditor.com/opensearch_desc.php" title="CKSource Docs (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://docs-old.ckeditor.com/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="CKSource Docs Atom feed" href="https://docs-old.ckeditor.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link href="https://fonts.googleapis.com/css?family=Maven+Pro:700,500,400" rel="stylesheet" type="text/css"/>
<link type="text/css" rel="stylesheet" href="../../skins/OldV4/resources/css/base.css" media="all"/>
<link type="text/css" rel="stylesheet" href="../../skins/OldV4/resources/css/main.css" media="all">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../skins/OldV4/resources/js/jquery-2.2.4.min.js"<\/script>');</script>
<script type="text/javascript">$(document).ready(function (){
        $("a.hidinglink")
        .each(function () {$("#" + $(this).show().attr("rel")).hide();})
        .click(function () {$("#" + $(this).attr("rel")).slideToggle();return false;});
      });
      </script>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-CKEditor_3_x_Developers_Guide_Data_Processor rootpage-CKEditor_3_x skin-oldv4 action-view">      <a href="Data_Processor.html#content-wrapper" id="skip-to-content" class="element-invisible element-focusable">Skip to main content</a>
      <div id="wrap">

          <header role="banner" class="main">
              <div>
                  <div class="first">
                      <h1><a href="https://docs-old.ckeditor.com/" title="Return to home page" class="cksource-logo">CKSource</a></h1>
                  </div>
              </div>
          </header>

          <div role="main" id="content-wrapper" tabindex="-1" class="content-wrapper">
              <div>
                        <div id="personaltools"
                    >
            <h5>
                <a href="https://docs-old.ckeditor.com/index.php?title=Special:UserLogin&amp;returnto=CKEditor+3.x%2FDevelopers+Guide%2FData+Processor">
                    Login / Create Account
                </a>
            </h5>
              </div>
    
                        <div id="pagetools" class="">
          <h5>Page Tools</h5>
          <div class="pagetoolslist">
              <ul>
                                    <li id="ca-nstab-main"
                                                class="selected"
                                          >
                        <a href="Data_Processor.html"
                           title="View the content page [c]" accesskey="c"                        >
                          Page                        </a>
                    </li>
                                    <li id="ca-talk"
                                                class="new"
                                          >
                        <a href="https://docs-old.ckeditor.com/index.php?title=Talk:CKEditor_3.x/Developers_Guide/Data_Processor&amp;action=edit&amp;redlink=1"
                           title="Discussion about the content page [t]" accesskey="t"                        >
                          Discussion                        </a>
                    </li>
                                    <li id="ca-viewsource"
                                          >
                        <a href="https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/Data_Processor&amp;action=edit"
                           title="This page is protected.
You can view its source [e]" accesskey="e"                        >
                          View source                        </a>
                    </li>
                                    <li id="ca-history"
                                          >
                        <a href="https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/Data_Processor&amp;action=history"
                           title="Past revisions of this page [h]" accesskey="h"                        >
                          History                        </a>
                    </li>
                              </ul>
          </div>
      </div>
    
                  <!--  page content -->
                  <div class="clear"></div>

                      <div id="content">
          <div id="main">
              <div id="mainInside">
                  <div id="mainInsideInside">
                      <div id="breadcrumbs"><span class="subpages">&lt; <a href="https://docs-old.ckeditor.com/CKEditor_3.x" title="CKEditor 3.x">CKEditor 3.x</a>&lrm; | <a href="../Developers_Guide.1.html" title="CKEditor 3.x/Developers Guide">Developers Guide</a></span></div>
                      <h1 id="mainHeader">Data Processor: Data Input and Output Manipulation</h1>

                      <div class="errorbox" style="margin-top: 40px;">
                          <p>This website contains links to software which is either no longer maintained or will be supported only until the end of 2019 (CKFinder 2). For the latest documentation about current CKSource projects, including software like CKEditor 4/CKEditor 5, CKFinder 3, Cloud Services, Letters, Accessibility Checker, please visit <a href="https://docs.ckeditor.com">the new documentation website</a>.</p>
                      </div>

                      <div id="mainCol">
                          <div class="post">
                            <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>CKEditor is a <b>browser based</b> editor. It means it uses the browser infrastructure to create its editing environment. Because of this the editing area in the editor is simply an HTML page that's manipulated by the user by typing or by using the editor features. Technically speaking, CKEditor is performing <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Document_Object_Model">DOM</a> manipulation on the page contents.
</p><p>Even if CKEditor uses HTML and the browser DOM as its base for editing, it is possible to input and output any kind of data on it. This data transformation is handled by the so called "Data Processor".
</p>
<div id="toc" class="toc"><div id="toctitle" class="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Data_Processor.html#The_Data_Processor"><span class="tocnumber">1</span> <span class="toctext">The Data Processor</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Data_Processor.html#The_Default_Data_Processor:_XHTML"><span class="tocnumber">2</span> <span class="toctext">The Default Data Processor: XHTML</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Data_Processor.html#HTML_Parser_Filters"><span class="tocnumber">3</span> <span class="toctext">HTML Parser Filters</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Data_Processor.html#Custom_Data_Processors"><span class="tocnumber">4</span> <span class="toctext">Custom Data Processors</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="The_Data_Processor">The Data Processor</span></h2>
<p>The Data Processor is an object, in the JavaScript point of view, which transforms the input data into HTML, and back to the output data format later. This transformation is provided by the <a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dataProcessor.html#toHtml">toHtml</a> and <a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dataProcessor.html#toDataFormat">toDataFormat</a> functions, respectively.
</p><p><a href="https://docs-old.ckeditor.com/File:CKEditor_Data_Processor.png" class="image"><img alt="CKEditor Data Processor.png" src="../../images/0/01/CKEditor_Data_Processor.png" width="594" height="190" /></a>
</p>
<h2><span class="mw-headline" id="The_Default_Data_Processor:_XHTML">The Default Data Processor: XHTML</span></h2>
<p>CKEditor is distributed with an XHTML Data Processor. This may sound strange, but it transforms the (X)HTML data inputted in the editor into "good" HTML. In this process it also makes some transformations required by some of the editor features. 
</p><p>The XHTML Data Processor is quite a complex, and flexible, piece of program. It's composed by several parts:
</p><p><a href="https://docs-old.ckeditor.com/File:CKEditor_XHTML_Data_Processor.png" class="image"><img alt="CKEditor XHTML Data Processor.png" src="../../images/9/92/CKEditor_XHTML_Data_Processor.png" width="853" height="190" /></a>
</p>
<ul><li> HTML Parser: reads the HTML inputted in the editor, transforming it into "good" html. It also transforms the HTML string into a JavaScript object tree, to be manipulated by "filters". See <a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.htmlParser.html">CKEDITOR.htmlParser</a>.</li></ul>
<ul><li> HTML Writer: outputs strings in HTML format based on the object tree representation of the data.</li></ul>
<p>Note that the HTML Parser is used on output as well, when retrieving the HTML from the browser. This is needed because browsers, especially IE, may produce bad quality code.
</p><p>The default Data Processor can be retrieved and manipulated by the <a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#dataProcessor">editor.dataProcessor</a> property.
</p>
<h2><span class="mw-headline" id="HTML_Parser_Filters">HTML Parser Filters</span></h2>
<p>Filters are one of the powerful features available on the HTML Parser. They're applied to the object representation of the parsed HTML data when transforming it back to strings. 
</p><p>Some of the application of filters are:
</p>
<ul><li> Remove attributes from elements.</li>
<li> Rewrite elements attributes values.</li>
<li> Rename element names or attributes.</li>
<li> Add missing attributes to elements.</li>
<li> Etc...</li></ul>
<p>The default XHTML Data Processor already applies several filters either on input and on output of data. You can extend it by adding custom filter rules (calling addRules()) to the following objects:
</p>
<ul><li> editor.dataProcessor.dataFilter: filter applied to the input data when transforming it to HTML to be loaded into the editor ("on input").</li>
<li> editor.dataProcessor.htmlFilter: filter applied to the HTML available in the editor when transforming it on the XHTML outputted by the editor ("on output").</li></ul>
<p>For example, the following code will ensure that &lt;img&gt; elements will have their "alt" attribute filled:
</p>
<pre>
editor.dataProcessor.htmlFilter.addRules(
    {
        elements&#160;:
        {
            img&#160;: function( element )
            {
                if (&#160;!element.attributes.alt )
                    element.attributes.alt = 'An image';
            }
        }
    });
</pre>
<h2><span class="mw-headline" id="Custom_Data_Processors">Custom Data Processors</span></h2>
<p>Plugin implementers can create data processors, which can transform custom non HTML data formats to be loaded and outputted by the editor. For example, there could be data processors for <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/BBCode">BBCode</a>, <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Wiki_markup">Wiki markup</a>, or any other kind of structured data markup. Even server side transformation could be considered, by executing <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/XMLHttpRequest">Ajax style calls</a> from the data processor code.
</p><p>To make the editor use a custom data processor, it's enough to set <a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#dataProcessor">editor.dataProcessor</a> to an object implementing the <a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dataProcessor.html">data processor interface</a>, replacing the default XHTML Data Processor.
</p><p>Custom data processors may use parts of the default XHTML Data Processor code, including the HTML Parser or even the HTML Writer. It's recommended checking the <a rel="nofollow" class="external text" href="http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/htmldataprocessor/plugin.js">htmldataprocessor plugin code</a> for reference and ideas.
</p>
<!-- 
NewPP limit report
Cached time: 20180629032308
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.037 seconds
Real time usage: 0.039 seconds
Preprocessor visited node count: 26/1000000
Preprocessor generated node count: 48/1000000
Post‐expand include size: 96/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key ckeditor_docsold:pcache:idhash:1392-0!*!*!!en!5!* and timestamp 20180629032308 and revision id 4436
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/Data_Processor&amp;oldid=4436">https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/Data_Processor&amp;oldid=4436</a>"</div>
                          </div>
                          <div class="clear"></div>
                      </div>

                                            <div id="contentfooter">
                           This page was last edited on 20 October 2010, at 17:32.                        </div>
                                      </div>
              </div>
          </div>
      </div><!--/content-->
                      <!--  & of page content  -->
              </div>
          </div>
      </div>

        <footer class="main">
        <div>
            <div class="additional">
                <small role="contentinfo">&copy; 2003 - 2018 <a href="https://cksource.com/" title="Go to CKSource">CKSource</a> Sp. z o.o. sp.k. All rights reserved</small>
            </div>
        </div>
    </footer>

    <!-- Google Tag Manager -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MX62SZ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function (w, d, s, l, i) {w[l] = w[l] || [];w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);})(window, document, 'script', 'dataLayer', 'GTM-MX62SZ');</script>
    <!-- End Google Tag Manager -->

    </body>
    </html>
    