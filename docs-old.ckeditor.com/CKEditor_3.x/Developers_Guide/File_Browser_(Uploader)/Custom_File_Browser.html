<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>CKEditor 3.x/Developers Guide/File Browser (Uploader)/Custom File Browser - CKSource Docs</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser","wgTitle":"CKEditor 3.x/Developers Guide/File Browser (Uploader)/Custom File Browser","wgCurRevisionId":6463,"wgRevisionId":6463,"wgArticleId":766,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser","wgRelevantArticleId":766,"wgRequestId":"WzWpQaKAnWD1LUOOWkbanAAAAIs","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"preview":true,"publish":true}});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@11i7vzj",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.HighlightjsIntegration"]);});</script>
<link rel="stylesheet" href="../../../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor&amp;only=styles&amp;skin=oldv4.css"/>
<script async="" src="../../../load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=oldv4"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<meta name="generator" content="MediaWiki 1.29.1"/>
<link rel="shortcut icon" href="https://c.cksource.com/c/2/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://docs-old.ckeditor.com/opensearch_desc.php" title="CKSource Docs (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://docs-old.ckeditor.com/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="CKSource Docs Atom feed" href="https://docs-old.ckeditor.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link href="https://fonts.googleapis.com/css?family=Maven+Pro:700,500,400" rel="stylesheet" type="text/css"/>
<link type="text/css" rel="stylesheet" href="../../../skins/OldV4/resources/css/base.css" media="all"/>
<link type="text/css" rel="stylesheet" href="../../../skins/OldV4/resources/css/main.css" media="all">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../../skins/OldV4/resources/js/jquery-2.2.4.min.js"<\/script>');</script>
<script type="text/javascript">$(document).ready(function (){
        $("a.hidinglink")
        .each(function () {$("#" + $(this).show().attr("rel")).hide();})
        .click(function () {$("#" + $(this).attr("rel")).slideToggle();return false;});
      });
      </script>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-CKEditor_3_x_Developers_Guide_File_Browser_Uploader_Custom_File_Browser rootpage-CKEditor_3_x skin-oldv4 action-view">      <a href="Custom_File_Browser.html#content-wrapper" id="skip-to-content" class="element-invisible element-focusable">Skip to main content</a>
      <div id="wrap">

          <header role="banner" class="main">
              <div>
                  <div class="first">
                      <h1><a href="https://docs-old.ckeditor.com/" title="Return to home page" class="cksource-logo">CKSource</a></h1>
                  </div>
              </div>
          </header>

          <div role="main" id="content-wrapper" tabindex="-1" class="content-wrapper">
              <div>
                        <div id="personaltools"
                    >
            <h5>
                <a href="https://docs-old.ckeditor.com/index.php?title=Special:UserLogin&amp;returnto=CKEditor+3.x%2FDevelopers+Guide%2FFile+Browser+%28Uploader%29%2FCustom+File+Browser">
                    Login / Create Account
                </a>
            </h5>
              </div>
    
                        <div id="pagetools" class="">
          <h5>Page Tools</h5>
          <div class="pagetoolslist">
              <ul>
                                    <li id="ca-nstab-main"
                                                class="selected"
                                          >
                        <a href="Custom_File_Browser.html"
                           title="View the content page [c]" accesskey="c"                        >
                          Page                        </a>
                    </li>
                                    <li id="ca-talk"
                                          >
                        <a href="https://docs-old.ckeditor.com/Talk:CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser"
                           title="Discussion about the content page [t]" accesskey="t"                        >
                          Discussion                        </a>
                    </li>
                                    <li id="ca-viewsource"
                                          >
                        <a href="https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser&amp;action=edit"
                           title="This page is protected.
You can view its source [e]" accesskey="e"                        >
                          View source                        </a>
                    </li>
                                    <li id="ca-history"
                                          >
                        <a href="https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser&amp;action=history"
                           title="Past revisions of this page [h]" accesskey="h"                        >
                          History                        </a>
                    </li>
                              </ul>
          </div>
      </div>
    
                  <!--  page content -->
                  <div class="clear"></div>

                      <div id="content">
          <div id="main">
              <div id="mainInside">
                  <div id="mainInsideInside">
                      <div id="breadcrumbs"><span class="subpages">&lt; <a href="https://docs-old.ckeditor.com/CKEditor_3.x" title="CKEditor 3.x">CKEditor 3.x</a>&lrm; | <a href="../../Developers_Guide.1.html" title="CKEditor 3.x/Developers Guide">Developers Guide</a>&lrm; | <a href="../File_Browser_(Uploader).html" title="CKEditor 3.x/Developers Guide/File Browser (Uploader)">File Browser (Uploader)</a></span></div>
                      <h1 id="mainHeader">Integrating CKEditor with a Custom File Browser</h1>

                      <div class="errorbox" style="margin-top: 40px;">
                          <p>This website contains links to software which is either no longer maintained or will be supported only until the end of 2019 (CKFinder 2). For the latest documentation about current CKSource projects, including software like CKEditor 4/CKEditor 5, CKFinder 3, Cloud Services, Letters, Accessibility Checker, please visit <a href="https://docs.ckeditor.com">the new documentation website</a>.</p>
                      </div>

                      <div id="mainCol">
                          <div class="post">
                            <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p> 
</p>
<div id="toc" class="toc"><div id="toctitle" class="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Custom_File_Browser.html#Interaction_Between_CKEditor_and_File_Browser"><span class="tocnumber">1</span> <span class="toctext">Interaction Between CKEditor and File Browser</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Custom_File_Browser.html#Example_1"><span class="tocnumber">1.1</span> <span class="toctext">Example 1</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="Custom_File_Browser.html#Passing_the_URL_of_the_Selected_File"><span class="tocnumber">2</span> <span class="toctext">Passing the URL of the Selected File</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Custom_File_Browser.html#Example_2"><span class="tocnumber">2.1</span> <span class="toctext">Example 2</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Custom_File_Browser.html#Example_3"><span class="tocnumber">2.2</span> <span class="toctext">Example 3</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Custom_File_Browser.html#Example_4"><span class="tocnumber">2.3</span> <span class="toctext">Example 4</span></a></li>
</ul>
</li>
</ul>
</div>

<p>CKEditor can be easily integrated with your own file browser.
</p><p>To connect a file browser that is already compatible with CKEditor (like <a rel="nofollow" class="external text" href="http://ckfinder.com">CKFinder</a>), follow the <a href="../File_Browser_(Uploader).html" title="CKEditor 3.x/Developers Guide/File Browser (Uploader)">File Browser (Uploader)</a> documentation.
</p>
<h2><span class="mw-headline" id="Interaction_Between_CKEditor_and_File_Browser">Interaction Between CKEditor and File Browser</span></h2>
<p>CKEditor automatically sends some additional arguments to the file browser: 
</p>
<ul><li> <code><a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#name">CKEditor</a></code> &#8211; name of the CKEditor instance,</li>
<li> <code><a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#langCode">langCode</a></code> &#8211; CKEditor language (<code>en</code> for English),</li>
<li> <code>CKEditorFuncNum</code> &#8211; anonymous function reference number used to pass the URL of a file to CKEditor (a random number).</li></ul>
<pre class="code2highlight lang-php">CKEditor=editor1&amp;CKEditorFuncNum=1&amp;langCode=en</pre>
<h3><span class="mw-headline" id="Example_1">Example 1</span></h3>
<p>Suppose that CKEditor was created using the following JavaScript call:
</p>
<pre class="code2highlight lang-javascript">CKEDITOR.replace( 'editor2',
    {
        filebrowserBrowseUrl&#160;: '/browser/browse.php?type=Images',
        filebrowserUploadUrl&#160;: '/uploader/upload.php?type=Files'
    });</pre>
<p>In order to browse files, CKEditor will call:
</p>
<pre class="code2highlight lang-php">/browser/browse.php?type=Images&amp;CKEditor=editor2&amp;CKEditorFuncNum=2&amp;langCode=de</pre>
<p>The call includes the following elements:
</p>
<ul><li> <code>/browser/browse.php?type=Images</code> &#8211; the value of the <code>filebrowserBrowseUrl</code> parameter,</li>
<li> <code>&amp;CKEditor=editor2&amp;CKEditorFuncNum=2&amp;langCode=de</code> &#8211; the information added by CKEditor:
<ul><li> <code>CKEditor=editor2</code> &#8211; the name of a CKEditor instance (<code>editor2</code>),</li>
<li> <code>CKEditorFuncNum=2</code> &#8211; the reference number of an anonymous function that should be used in the <code><a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.tools.html#.callFunction">CKEDITOR.tools.callFunction</a></code>,</li>
<li> <code>langCode=de</code> &#8211; language code (in this case: German). This parameter can be used to send localized error messages.</li></ul></li></ul>
<h2><span class="mw-headline" id="Passing_the_URL_of_the_Selected_File">Passing the URL of the Selected File</span></h2>
<p>To send back the file URL from an external file browser, call <code><a rel="nofollow" class="external text" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.tools.html#.callFunction">CKEDITOR.tools.callFunction</a></code> and pass <code>CKEditorFuncNum</code> as the first argument:
</p>
<pre class="code2highlight lang-php">window.opener.CKEDITOR.tools.callFunction( funcNum, fileUrl [, data] );</pre>
<p>If <code>data</code> (the third argument) is a string, it will be displayed by CKEditor. This parameter is usually used to display an error message if a problem occurs during the file upload.
</p>
<h3><span class="mw-headline" id="Example_2">Example 2</span></h3>
<p>The following example shows how to send the URL from a file browser using JavaScript code:
</p>
<pre class="code2highlight lang-javascript">// Helper function to get parameters from the query string.
function getUrlParam(paramName)
{
  var reParam = new RegExp('(?:[\?&amp;]|&amp;amp;)' + paramName + '=([^&amp;]+)', 'i')&#160;;
  var match = window.location.search.match(reParam)&#160;;

  return (match &amp;&amp; match.length &gt; 1)&#160;? match[1]&#160;: ''&#160;;
}
var funcNum = getUrlParam('CKEditorFuncNum');
var fileUrl = '/path/to/file.txt';
window.opener.CKEDITOR.tools.callFunction(funcNum, fileUrl);</pre>
<h3><span class="mw-headline" id="Example_3">Example 3</span></h3>
<p>The following code shows how to send back the URL of an uploaded file from the PHP connector:
</p>
<pre class="code2highlight lang-php">&lt;?php
// Required: anonymous function reference number as explained above.
$funcNum = $_GET['CKEditorFuncNum']&#160;;
// Optional: instance name (might be used to load a specific configuration file or anything else).
$CKEditor = $_GET['CKEditor']&#160;;
// Optional: might be used to provide localized messages.
$langCode = $_GET['langCode']&#160;;

// Check the $_FILES array and save the file. Assign the correct path to a variable ($url).
$url = '/path/to/uploaded/file.ext';
// Usually you will only assign something here if the file could not be uploaded.
$message = '';

echo &quot;&lt;script type='text/javascript'&gt;window.parent.CKEDITOR.tools.callFunction($funcNum, '$url', '$message');&lt;/script&gt;&quot;;
?&gt;</pre>
<h3><span class="mw-headline" id="Example_4">Example 4</span></h3>
<p>If <code>data</code> is a function, it will be executed in the scope of the button that called the file browser. It means that the server connector can have direct access CKEditor and the dialog window to which the button belongs.
</p><p>Suppose that apart from passing the <code>fileUrl</code> value that is assigned to an appropriate field automatically based on the dialog window definition you also want to set the <code>alt</code> attribute, if the file browser was opened in the <b>Image Properties</b> dialog window. In order to do this, pass an anonymous function as a third argument:
</p>
<pre class="code2highlight lang-javascript">window.opener.CKEDITOR.tools.callFunction( funcNum, fileUrl, function() {
  // Get the reference to a dialog window.
  var element, dialog = this.getDialog();
  // Check if this is the Image dialog window.
  if (dialog.getName() == 'image') {
    // Get the reference to a text field that holds the &quot;alt&quot; attribute.
    element = dialog.getContentElement( 'info', 'txtAlt' );
    // Assign the new value.
    if ( element )
      element.setValue( &quot;alt text&quot; );
  }
  ...
  // Return false to stop further execution - in such case CKEditor will ignore the second argument (fileUrl)
  // and the onSelect function assigned to a button that called the file browser (if defined).
  [return false;]
});</pre>

<!-- 
NewPP limit report
Cached time: 20180628082529
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.018 seconds
Real time usage: 0.020 seconds
Preprocessor visited node count: 82/1000000
Preprocessor generated node count: 176/1000000
Post‐expand include size: 93/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key ckeditor_docsold:pcache:idhash:766-0!*!0!!en!*!* and timestamp 20180628082529 and revision id 6463
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser&amp;oldid=6463">https://docs-old.ckeditor.com/index.php?title=CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser&amp;oldid=6463</a>"</div>
                          </div>
                          <div class="clear"></div>
                      </div>

                                            <div id="contentfooter">
                           This page was last edited on 30 August 2011, at 10:28.                        </div>
                                      </div>
              </div>
          </div>
      </div><!--/content-->
                      <!--  & of page content  -->
              </div>
          </div>
      </div>

        <footer class="main">
        <div>
            <div class="additional">
                <small role="contentinfo">&copy; 2003 - 2018 <a href="https://cksource.com/" title="Go to CKSource">CKSource</a> Sp. z o.o. sp.k. All rights reserved</small>
            </div>
        </div>
    </footer>

    <!-- Google Tag Manager -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MX62SZ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function (w, d, s, l, i) {w[l] = w[l] || [];w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);})(window, document, 'script', 'dataLayer', 'GTM-MX62SZ');</script>
    <!-- End Google Tag Manager -->

    </body>
    </html>
    